namespace FakePhotonLib.PhotonRelated.StructWrapping;

public class StructWrapperPools
{
    public static readonly StructWrapper<byte>[] mappedByteWrappers =
    [
      new(Pooling.Readonly)
      {
        value = (byte) 0
      },
      new(Pooling.Readonly)
      {
        value = (byte) 1
      },
      new(Pooling.Readonly)
      {
        value = (byte) 2
      },
      new(Pooling.Readonly)
      {
        value = (byte) 3
      },
      new(Pooling.Readonly)
      {
        value = (byte) 4
      },
      new(Pooling.Readonly)
      {
        value = (byte) 5
      },
      new(Pooling.Readonly)
      {
        value = (byte) 6
      },
      new(Pooling.Readonly)
      {
        value = (byte) 7
      },
      new(Pooling.Readonly)
      {
        value = (byte) 8
      },
      new(Pooling.Readonly)
      {
        value = (byte) 9
      },
      new(Pooling.Readonly)
      {
        value = (byte) 10
      },
      new(Pooling.Readonly)
      {
        value = (byte) 11
      },
      new(Pooling.Readonly)
      {
        value = (byte) 12
      },
      new(Pooling.Readonly)
      {
        value = (byte) 13
      },
      new(Pooling.Readonly)
      {
        value = (byte) 14
      },
      new(Pooling.Readonly)
      {
        value = (byte) 15
      },
      new(Pooling.Readonly)
      {
        value = (byte) 16
      },
      new(Pooling.Readonly)
      {
        value = (byte) 17
      },
      new(Pooling.Readonly)
      {
        value = (byte) 18
      },
      new(Pooling.Readonly)
      {
        value = (byte) 19
      },
      new(Pooling.Readonly)
      {
        value = (byte) 20
      },
      new(Pooling.Readonly)
      {
        value = (byte) 21
      },
      new(Pooling.Readonly)
      {
        value = (byte) 22
      },
      new(Pooling.Readonly)
      {
        value = (byte) 23
      },
      new(Pooling.Readonly)
      {
        value = (byte) 24
      },
      new(Pooling.Readonly)
      {
        value = (byte) 25
      },
      new(Pooling.Readonly)
      {
        value = (byte) 26
      },
      new(Pooling.Readonly)
      {
        value = (byte) 27
      },
      new(Pooling.Readonly)
      {
        value = (byte) 28
      },
      new(Pooling.Readonly)
      {
        value = (byte) 29
      },
      new(Pooling.Readonly)
      {
        value = (byte) 30
      },
      new(Pooling.Readonly)
      {
        value = (byte) 31
      },
      new(Pooling.Readonly)
      {
        value = (byte) 32
      },
      new(Pooling.Readonly)
      {
        value = (byte) 33
      },
      new(Pooling.Readonly)
      {
        value = (byte) 34
      },
      new(Pooling.Readonly)
      {
        value = (byte) 35
      },
      new(Pooling.Readonly)
      {
        value = (byte) 36
      },
      new(Pooling.Readonly)
      {
        value = (byte) 37
      },
      new(Pooling.Readonly)
      {
        value = (byte) 38
      },
      new(Pooling.Readonly)
      {
        value = (byte) 39
      },
      new(Pooling.Readonly)
      {
        value = (byte) 40
      },
      new(Pooling.Readonly)
      {
        value = (byte) 41
      },
      new(Pooling.Readonly)
      {
        value = (byte) 42
      },
      new(Pooling.Readonly)
      {
        value = (byte) 43
      },
      new(Pooling.Readonly)
      {
        value = (byte) 44
      },
      new(Pooling.Readonly)
      {
        value = (byte) 45
      },
      new(Pooling.Readonly)
      {
        value = (byte) 46
      },
      new(Pooling.Readonly)
      {
        value = (byte) 47
      },
      new(Pooling.Readonly)
      {
        value = (byte) 48
      },
      new(Pooling.Readonly)
      {
        value = (byte) 49
      },
      new(Pooling.Readonly)
      {
        value = (byte) 50
      },
      new(Pooling.Readonly)
      {
        value = (byte) 51
      },
      new(Pooling.Readonly)
      {
        value = (byte) 52
      },
      new(Pooling.Readonly)
      {
        value = (byte) 53
      },
      new(Pooling.Readonly)
      {
        value = (byte) 54
      },
      new(Pooling.Readonly)
      {
        value = (byte) 55
      },
      new(Pooling.Readonly)
      {
        value = (byte) 56
      },
      new(Pooling.Readonly)
      {
        value = (byte) 57
      },
      new(Pooling.Readonly)
      {
        value = (byte) 58
      },
      new(Pooling.Readonly)
      {
        value = (byte) 59
      },
      new(Pooling.Readonly)
      {
        value = (byte) 60
      },
      new(Pooling.Readonly)
      {
        value = (byte) 61
      },
      new(Pooling.Readonly)
      {
        value = (byte) 62
      },
      new(Pooling.Readonly)
      {
        value = (byte) 63
      },
      new(Pooling.Readonly)
      {
        value = (byte) 64
      },
      new(Pooling.Readonly)
      {
        value = (byte) 65
      },
      new(Pooling.Readonly)
      {
        value = (byte) 66
      },
      new(Pooling.Readonly)
      {
        value = (byte) 67
      },
      new(Pooling.Readonly)
      {
        value = (byte) 68
      },
      new(Pooling.Readonly)
      {
        value = (byte) 69
      },
      new(Pooling.Readonly)
      {
        value = (byte) 70
      },
      new(Pooling.Readonly)
      {
        value = (byte) 71
      },
      new(Pooling.Readonly)
      {
        value = (byte) 72
      },
      new(Pooling.Readonly)
      {
        value = (byte) 73
      },
      new(Pooling.Readonly)
      {
        value = (byte) 74
      },
      new(Pooling.Readonly)
      {
        value = (byte) 75
      },
      new(Pooling.Readonly)
      {
        value = (byte) 76
      },
      new(Pooling.Readonly)
      {
        value = (byte) 77
      },
      new(Pooling.Readonly)
      {
        value = (byte) 78
      },
      new(Pooling.Readonly)
      {
        value = (byte) 79
      },
      new(Pooling.Readonly)
      {
        value = (byte) 80
      },
      new(Pooling.Readonly)
      {
        value = (byte) 81
      },
      new(Pooling.Readonly)
      {
        value = (byte) 82
      },
      new(Pooling.Readonly)
      {
        value = (byte) 83
      },
      new(Pooling.Readonly)
      {
        value = (byte) 84
      },
      new(Pooling.Readonly)
      {
        value = (byte) 85
      },
      new(Pooling.Readonly)
      {
        value = (byte) 86
      },
      new(Pooling.Readonly)
      {
        value = (byte) 87
      },
      new(Pooling.Readonly)
      {
        value = (byte) 88
      },
      new(Pooling.Readonly)
      {
        value = (byte) 89
      },
      new(Pooling.Readonly)
      {
        value = (byte) 90
      },
      new(Pooling.Readonly)
      {
        value = (byte) 91
      },
      new(Pooling.Readonly)
      {
        value = (byte) 92
      },
      new(Pooling.Readonly)
      {
        value = (byte) 93
      },
      new(Pooling.Readonly)
      {
        value = (byte) 94
      },
      new(Pooling.Readonly)
      {
        value = (byte) 95
      },
      new(Pooling.Readonly)
      {
        value = (byte) 96
      },
      new(Pooling.Readonly)
      {
        value = (byte) 97
      },
      new(Pooling.Readonly)
      {
        value = (byte) 98
      },
      new(Pooling.Readonly)
      {
        value = (byte) 99
      },
      new(Pooling.Readonly)
      {
        value = (byte) 100
      },
      new(Pooling.Readonly)
      {
        value = (byte) 101
      },
      new(Pooling.Readonly)
      {
        value = (byte) 102
      },
      new(Pooling.Readonly)
      {
        value = (byte) 103
      },
      new(Pooling.Readonly)
      {
        value = (byte) 104
      },
      new(Pooling.Readonly)
      {
        value = (byte) 105
      },
      new(Pooling.Readonly)
      {
        value = (byte) 106
      },
      new(Pooling.Readonly)
      {
        value = (byte) 107
      },
      new(Pooling.Readonly)
      {
        value = (byte) 108
      },
      new(Pooling.Readonly)
      {
        value = (byte) 109
      },
      new(Pooling.Readonly)
      {
        value = (byte) 110
      },
      new(Pooling.Readonly)
      {
        value = (byte) 111
      },
      new(Pooling.Readonly)
      {
        value = (byte) 112
      },
      new(Pooling.Readonly)
      {
        value = (byte) 113
      },
      new(Pooling.Readonly)
      {
        value = (byte) 114
      },
      new(Pooling.Readonly)
      {
        value = (byte) 115
      },
      new(Pooling.Readonly)
      {
        value = (byte) 116
      },
      new(Pooling.Readonly)
      {
        value = (byte) 117
      },
      new(Pooling.Readonly)
      {
        value = (byte) 118
      },
      new(Pooling.Readonly)
      {
        value = (byte) 119
      },
      new(Pooling.Readonly)
      {
        value = (byte) 120
      },
      new(Pooling.Readonly)
      {
        value = (byte) 121
      },
      new(Pooling.Readonly)
      {
        value = (byte) 122
      },
      new(Pooling.Readonly)
      {
        value = (byte) 123
      },
      new(Pooling.Readonly)
      {
        value = (byte) 124
      },
      new(Pooling.Readonly)
      {
        value = (byte) 125
      },
      new(Pooling.Readonly)
      {
        value = (byte) 126
      },
      new(Pooling.Readonly)
      {
        value = (byte) 127
      },
      new(Pooling.Readonly)
      {
        value = (byte) 128
      },
      new(Pooling.Readonly)
      {
        value = (byte) 129
      },
      new(Pooling.Readonly)
      {
        value = (byte) 130
      },
      new(Pooling.Readonly)
      {
        value = (byte) 131
      },
      new(Pooling.Readonly)
      {
        value = (byte) 132
      },
      new(Pooling.Readonly)
      {
        value = (byte) 133
      },
      new(Pooling.Readonly)
      {
        value = (byte) 134
      },
      new(Pooling.Readonly)
      {
        value = (byte) 135
      },
      new(Pooling.Readonly)
      {
        value = (byte) 136
      },
      new(Pooling.Readonly)
      {
        value = (byte) 137
      },
      new(Pooling.Readonly)
      {
        value = (byte) 138
      },
      new(Pooling.Readonly)
      {
        value = (byte) 139
      },
      new(Pooling.Readonly)
      {
        value = (byte) 140
      },
      new(Pooling.Readonly)
      {
        value = (byte) 141
      },
      new(Pooling.Readonly)
      {
        value = (byte) 142
      },
      new(Pooling.Readonly)
      {
        value = (byte) 143
      },
      new(Pooling.Readonly)
      {
        value = (byte) 144
      },
      new(Pooling.Readonly)
      {
        value = (byte) 145
      },
      new(Pooling.Readonly)
      {
        value = (byte) 146
      },
      new(Pooling.Readonly)
      {
        value = (byte) 147
      },
      new(Pooling.Readonly)
      {
        value = (byte) 148
      },
      new(Pooling.Readonly)
      {
        value = (byte) 149
      },
      new(Pooling.Readonly)
      {
        value = (byte) 150
      },
      new(Pooling.Readonly)
      {
        value = (byte) 151
      },
      new(Pooling.Readonly)
      {
        value = (byte) 152
      },
      new(Pooling.Readonly)
      {
        value = (byte) 153
      },
      new(Pooling.Readonly)
      {
        value = (byte) 154
      },
      new(Pooling.Readonly)
      {
        value = (byte) 155
      },
      new(Pooling.Readonly)
      {
        value = (byte) 156
      },
      new(Pooling.Readonly)
      {
        value = (byte) 157
      },
      new(Pooling.Readonly)
      {
        value = (byte) 158
      },
      new(Pooling.Readonly)
      {
        value = (byte) 159
      },
      new(Pooling.Readonly)
      {
        value = (byte) 160
      },
      new(Pooling.Readonly)
      {
        value = (byte) 161
      },
      new(Pooling.Readonly)
      {
        value = (byte) 162
      },
      new(Pooling.Readonly)
      {
        value = (byte) 163
      },
      new(Pooling.Readonly)
      {
        value = (byte) 164
      },
      new(Pooling.Readonly)
      {
        value = (byte) 165
      },
      new(Pooling.Readonly)
      {
        value = (byte) 166
      },
      new(Pooling.Readonly)
      {
        value = (byte) 167
      },
      new(Pooling.Readonly)
      {
        value = (byte) 168
      },
      new(Pooling.Readonly)
      {
        value = (byte) 169
      },
      new(Pooling.Readonly)
      {
        value = (byte) 170
      },
      new(Pooling.Readonly)
      {
        value = (byte) 171
      },
      new(Pooling.Readonly)
      {
        value = (byte) 172
      },
      new(Pooling.Readonly)
      {
        value = (byte) 173
      },
      new(Pooling.Readonly)
      {
        value = (byte) 174
      },
      new(Pooling.Readonly)
      {
        value = (byte) 175
      },
      new(Pooling.Readonly)
      {
        value = (byte) 176
      },
      new(Pooling.Readonly)
      {
        value = (byte) 177
      },
      new(Pooling.Readonly)
      {
        value = (byte) 178
      },
      new(Pooling.Readonly)
      {
        value = (byte) 179
      },
      new(Pooling.Readonly)
      {
        value = (byte) 180
      },
      new(Pooling.Readonly)
      {
        value = (byte) 181
      },
      new(Pooling.Readonly)
      {
        value = (byte) 182
      },
      new(Pooling.Readonly)
      {
        value = (byte) 183
      },
      new(Pooling.Readonly)
      {
        value = (byte) 184
      },
      new(Pooling.Readonly)
      {
        value = (byte) 185
      },
      new(Pooling.Readonly)
      {
        value = (byte) 186
      },
      new(Pooling.Readonly)
      {
        value = (byte) 187
      },
      new(Pooling.Readonly)
      {
        value = (byte) 188
      },
      new(Pooling.Readonly)
      {
        value = (byte) 189
      },
      new(Pooling.Readonly)
      {
        value = (byte) 190
      },
      new(Pooling.Readonly)
      {
        value = (byte) 191
      },
      new(Pooling.Readonly)
      {
        value = (byte) 192
      },
      new(Pooling.Readonly)
      {
        value = (byte) 193
      },
      new(Pooling.Readonly)
      {
        value = (byte) 194
      },
      new(Pooling.Readonly)
      {
        value = (byte) 195
      },
      new(Pooling.Readonly)
      {
        value = (byte) 196
      },
      new(Pooling.Readonly)
      {
        value = (byte) 197
      },
      new(Pooling.Readonly)
      {
        value = (byte) 198
      },
      new(Pooling.Readonly)
      {
        value = (byte) 199
      },
      new(Pooling.Readonly)
      {
        value = (byte) 200
      },
      new(Pooling.Readonly)
      {
        value = (byte) 201
      },
      new(Pooling.Readonly)
      {
        value = (byte) 202
      },
      new(Pooling.Readonly)
      {
        value = (byte) 203
      },
      new(Pooling.Readonly)
      {
        value = (byte) 204
      },
      new(Pooling.Readonly)
      {
        value = (byte) 205
      },
      new(Pooling.Readonly)
      {
        value = (byte) 206
      },
      new(Pooling.Readonly)
      {
        value = (byte) 207
      },
      new(Pooling.Readonly)
      {
        value = (byte) 208
      },
      new(Pooling.Readonly)
      {
        value = (byte) 209
      },
      new(Pooling.Readonly)
      {
        value = (byte) 210
      },
      new(Pooling.Readonly)
      {
        value = (byte) 211
      },
      new(Pooling.Readonly)
      {
        value = (byte) 212
      },
      new(Pooling.Readonly)
      {
        value = (byte) 213
      },
      new(Pooling.Readonly)
      {
        value = (byte) 214
      },
      new(Pooling.Readonly)
      {
        value = (byte) 215
      },
      new(Pooling.Readonly)
      {
        value = (byte) 216
      },
      new(Pooling.Readonly)
      {
        value = (byte) 217
      },
      new(Pooling.Readonly)
      {
        value = (byte) 218
      },
      new(Pooling.Readonly)
      {
        value = (byte) 219
      },
      new(Pooling.Readonly)
      {
        value = (byte) 220
      },
      new(Pooling.Readonly)
      {
        value = (byte) 221
      },
      new(Pooling.Readonly)
      {
        value = (byte) 222
      },
      new(Pooling.Readonly)
      {
        value = (byte) 223
      },
      new(Pooling.Readonly)
      {
        value = (byte) 224
      },
      new(Pooling.Readonly)
      {
        value = (byte) 225
      },
      new(Pooling.Readonly)
      {
        value = (byte) 226
      },
      new(Pooling.Readonly)
      {
        value = (byte) 227
      },
      new(Pooling.Readonly)
      {
        value = (byte) 228
      },
      new(Pooling.Readonly)
      {
        value = (byte) 229
      },
      new(Pooling.Readonly)
      {
        value = (byte) 230
      },
      new(Pooling.Readonly)
      {
        value = (byte) 231
      },
      new(Pooling.Readonly)
      {
        value = (byte) 232
      },
      new(Pooling.Readonly)
      {
        value = (byte) 233
      },
      new(Pooling.Readonly)
      {
        value = (byte) 234
      },
      new(Pooling.Readonly)
      {
        value = (byte) 235
      },
      new(Pooling.Readonly)
      {
        value = (byte) 236
      },
      new(Pooling.Readonly)
      {
        value = (byte) 237
      },
      new(Pooling.Readonly)
      {
        value = (byte) 238
      },
      new(Pooling.Readonly)
      {
        value = (byte) 239
      },
      new(Pooling.Readonly)
      {
        value = (byte) 240
      },
      new(Pooling.Readonly)
      {
        value = (byte) 241
      },
      new(Pooling.Readonly)
      {
        value = (byte) 242
      },
      new(Pooling.Readonly)
      {
        value = (byte) 243
      },
      new(Pooling.Readonly)
      {
        value = (byte) 244
      },
      new(Pooling.Readonly)
      {
        value = (byte) 245
      },
      new(Pooling.Readonly)
      {
        value = (byte) 246
      },
      new(Pooling.Readonly)
      {
        value = (byte) 247
      },
      new(Pooling.Readonly)
      {
        value = (byte) 248
      },
      new(Pooling.Readonly)
      {
        value = (byte) 249
      },
      new(Pooling.Readonly)
      {
        value = (byte) 250
      },
      new(Pooling.Readonly)
      {
        value = (byte) 251
      },
      new(Pooling.Readonly)
      {
        value = (byte) 252
      },
      new(Pooling.Readonly)
      {
        value = (byte) 253
      },
      new(Pooling.Readonly)
      {
        value = (byte) 254
      },
      new(Pooling.Readonly)
      {
        value = byte.MaxValue
      }
    ];
    public static readonly StructWrapper<bool>[] mappedBoolWrappers =
    [
      new StructWrapper<bool>(Pooling.Readonly) { value = false },
      new StructWrapper<bool>(Pooling.Readonly) { value = true }
    ];
    private readonly Dictionary<Type, StructWrapperPool> pools = [];
    private readonly List<IDisposable> used = [];

    private StructWrapperPool<T> GetPoolForType<T>()
    {
        if (pools.TryGetValue(typeof(T), out StructWrapperPool? poolForType1))
            return (StructWrapperPool<T>)poolForType1;
        StructWrapperPool<T> poolForType2 = new(false);
        pools.Add(typeof(T), poolForType2);
        return poolForType2;
    }

    public static StructWrapper<byte> Acquire(byte value)
    {
        return mappedByteWrappers[value];
    }

    public static StructWrapper<bool> Acquire(bool value)
    {
        return mappedBoolWrappers[value ? 1 : 0];
    }

    public StructWrapper<T> Acquire<T>(T value)
    {
        StructWrapper<T> structWrapper = GetPoolForType<T>().Acquire(value);
        used.Add(structWrapper);
        return structWrapper;
    }

    public void Clear()
    {
        foreach (IDisposable disposable in used)
            disposable.Dispose();
        used.Clear();
    }
}